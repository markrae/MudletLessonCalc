<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE MudletPackage>
<MudletPackage version="1.0">
    <TriggerPackage/>
    <TimerPackage/>
    <AliasPackage>
        <Alias isActive="yes" isFolder="no">
            <name>Lesson Calculator</name>
            <script>if matches[7] == nil then
--This command calculates the approximate number of lessons you 
--would need to go from skillrank A to skillrank B.
--syntax: lessoncalc &lt;rank&gt; &lt;percentage&gt; to &lt;rank&gt; &lt;percentage&gt;
--example: lessoncalc apprentice 50 to master 0
	local currentSkill = skillValue(matches[2],tonumber(matches[3]))
	local desiredSkill = skillValue(matches[5],tonumber(matches[6]))
	local requiredLessons = desiredSkill-currentSkill
	echo(&quot;Approximate cost in lessons: &quot;..requiredLessons)
	--echo(&quot;\nApproximate cost in credits: &quot;..requiredLessons/6)
else
--Lesson plus command
--The purpose of this is so I can easily see how far a given number
--of lessons would get me in a skill given my current rank and
--progress.
--syntax: lessoncalc &lt;currentrank&gt; &lt;percentage&gt; plus &lt;num of lessons&gt;
--example: lessoncalc gifted 33 plus 120
	currentSkill = skillValue(matches[2],tonumber(matches[3]))
	newSkill = valueSkill( currentSkill + tonumber(matches[7]) )
	echo(&quot;Your new skill rank would be: &quot;..newSkill)
end</script>
            <command></command>
            <packageName></packageName>
            <regex>^lessoncalc (\w+) (\d+) (to (\w+) (\d+)|plus (\d+))</regex>
        </Alias>
    </AliasPackage>
    <ActionPackage/>
    <ScriptPackage>
        <Script isActive="yes" isFolder="no">
            <name>skillValue</name>
            <packageName></packageName>
            <script>-- Skill Value Script
-- skill value here is the approximate number of lessons it takes to achieve that rank
-- it is represented by a string parameter:rank, which serves as a platform or base 
-- and a percentage, which represents how far along one is toward the next rank

--rank should be a string, and soFar should be a whole number representing a percentage
function skillValue(rank, soFar)
	if rank == &quot;inept&quot; then
		base = 0
		toNext = 7
	elseif rank == &quot;novice&quot; then
		base = 7
		toNext = 9
	elseif rank == &quot;apprentice&quot; then
		base = 16 -- total lessons needed to reach Apprentice rank
		toNext = 18 -- the difference between the current and the next rank
	elseif rank == &quot;capable&quot; then
		base = 34
		toNext = 56
	elseif rank == &quot;adept&quot; then
		base = 90
		toNext = 89
	elseif rank == &quot;skilled&quot; then
		base = 179
		toNext = 112
	elseif rank == &quot;gifted&quot; then
		base = 291
		toNext = 134
	elseif rank == &quot;expert&quot; then
		base = 425
		toNext = 178
	elseif rank == &quot;virtuoso&quot; then
		base = 603
		toNext = 315
	elseif rank == &quot;fabled&quot; then
		base = 924
		toNext = 383
	elseif rank == &quot;mythical&quot; then
		base = 1307
		toNext = 450	
	elseif rank == &quot;transcendent&quot; then
		base = 1757
		toNext = 0
	else
		echo(&quot;mistake made&quot;)
	end
	---echo(tostring(base)..&quot; &quot;..tostring(rank))
	return( tostring(base + toNext*(soFar/100)) )
end
</script>
            <eventHandlerList/>
        </Script>
        <Script isActive="yes" isFolder="no">
            <name>valueSkill</name>
            <packageName></packageName>
            <script>-- valueSkill Script
-- The purpose of this script is to basically do the reverse of what
-- skillValue does, hence the reversed name. Where skillValue takes
-- strings and converts them to numbers, this function will take
-- numbers and convert them to the proper string.

-- by using elseif's it should drop out of the conditions as soon
-- as it reaches a rank that it's below
function valueSkill( lessons)
	if lessons &lt; 7 then
		rank = &quot;inept&quot;
		soFar = lessons/7
	elseif lessons &lt; 16 then
		rank = &quot;novice&quot;
--soFar = (lessonsSpent - totalCostOfPreviousRank) / immediateCostOfNextRank
		soFar = (lessons - 7)/9
	elseif lessons &lt; 34 then
		rank = &quot;apprentice&quot;
		soFar = (lessons - 16)/18
	elseif lessons &lt; 90 then
		rank = &quot;capable&quot;
		soFar = (lessons - 34)/56
	elseif lessons &lt; 179 then
		rank = &quot;adept&quot;
		soFar = (lessons - 90)/89
	elseif lessons &lt; 291 then
		rank = &quot;skilled&quot;
		soFar = (lessons - 179)/112
	elseif lessons &lt; 425 then
		rank = &quot;gifted&quot;
		soFar = (lessons - 291)/134
	elseif lessons &lt; 603 then
		rank = &quot;expert&quot;
		soFar = (lessons - 425)/178
	elseif lessons &lt; 924 then
		rank = &quot;virtuoso&quot;
		soFar = (lessons - 603)/315
	elseif lessons &lt; 1307 then
		rank = &quot;fabled&quot;
		soFar = (lessons - 924)/383
	elseif lessons &lt; 1757 then
		rank = &quot;mythical&quot;
		soFar = (lessons - 1307)/450
	else
		rank = &quot;transcendent&quot;
		soFar = 0
	end
	return(rank..&quot; &quot;..(soFar*100))
end</script>
            <eventHandlerList/>
        </Script>
    </ScriptPackage>
    <KeyPackage/>
</MudletPackage>
